@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.hmrcfrontend.views.html.helpers.HmrcLayout
@import views.html.helper.CSPNonce
@import controllers.routes
@import config.FrontendAppConfig
@import play.api.mvc.Request
@import play.api.i18n.Messages
@import uk.gov.hmrc.webchat.client.WebChatClient

@this(hmrcLayout: HmrcLayout, webChatClient: WebChatClient)

@(title: String,
  appConfig: FrontendAppConfig,
  scriptElem: Option[Html] = None,
  js: Seq[String] = Seq("show-hide-content.js", "offpayrollfrontend.js"),
  css: Option[String] = Some("offpayrollfrontend-app")
)(contentBlock: Html)(implicit request: Request[_], messages: Messages)

@headContent = {
    <meta name="format-detection" content="telephone=no" />
    @css.map { x =>
        <link rel="stylesheet" href='@routes.Assets.versioned(s"stylesheets/$x.css")' />
  }
}

@scriptElement = {
@scriptElem.map(x => x)
@{webChatClient.loadRequiredElements()}
@{webChatClient.loadWebChatContainer("HMRC_Anchored_1")}
@js.map { x =>
    <script src='@routes.Assets.versioned(s"javascripts/$x")'> </script>
}
}

@hmrcLayout(
    pageTitle = Some(title),
    isWelshTranslationAvailable = true,
    serviceUrl = Some(routes.IndexController.onPageLoad.url),
    additionalHeadBlock = Some(headContent),
    additionalScriptsBlock = Some(scriptElement),
    nonce = CSPNonce.get,
)(contentBlock)